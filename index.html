<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pixel Ticker Tiles (3x3)</title>

  font-family: monospace;

  <style>
    :root{
      --bg:#000;
      --w:#f2f2f2;
      --g:#39ff5a;
      --r:#ff2d2d;
      --dot: rgba(255,255,255,.09);
      --tile: rgba(255,255,255,.10);
    }

    html,body{
      margin:0;
      height:100%;
      background:var(--bg);
      overflow:hidden;
      font-family:"VT323", monospace;
    }

    /* Force 1:1 square, centered */
    .stage{
      height:100%;
      width:100%;
      display:grid;
      place-items:center;
      background:var(--bg);
    }

    .board{
      width:min(100vmin,100vw,100vh);
      aspect-ratio:1/1;
      box-sizing:border-box;
      padding:10px;
      background:
        radial-gradient(circle at 1px 1px, var(--dot) 1px, transparent 1.6px);
      background-size:6px 6px;
      background-color:var(--bg);
    }

    .grid{
      width:100%;
      height:100%;
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: repeat(3, 1fr);
      gap:10px;
    }

    .tile{
      border:2px solid var(--tile);
      border-radius:14px;
      background:#000;
      box-sizing:border-box;
      padding:10px 12px;
      display:grid;
      grid-template-rows:auto 1fr;
      overflow:hidden;
    }

    .tile *{
      -webkit-font-smoothing:none;
      image-rendering:pixelated;
    }

    .top{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      line-height:1;
      margin-bottom:6px;
    }

    .pct{
      font-size:34px;
    }

    .sym{
      color:var(--w);
      font-size:34px;
      letter-spacing:1px;
    }

    .price{
      color:var(--w);
      font-size:52px;
      line-height:1;
      align-self:end;
    }

    .up{ color:var(--g); text-shadow:0 0 10px rgba(57,255,90,.20); }
    .down{ color:var(--r); text-shadow:0 0 10px rgba(255,45,45,.20); }

    @media (max-width: 520px), (max-height: 520px){
      .pct{ font-size:26px; }
      .sym{ font-size:26px; }
      .price{ font-size:40px; }
      .grid{ gap:8px; }
      .board{ padding:8px; }
      .tile{ padding:8px 10px; border-radius:12px; }
    }
  </style>
</head>

<body>
  <div class="stage">
    <div class="board">
      <div class="grid" id="grid"></div>
    </div>
  </div>

  <script>
    // Your 9 tickers (requested order)
    const symbols = ["SCHD","IAU","SLV","BTC","GME","AMC","USAR","QQQ","CRWV"];

    // Your Cloudflare Worker endpoint (safe)
    const const ENDPOINT = "https://pixel-ticker-api.ryan-j-cahoon.workers.dev/";
const QUOTE_URL = ENDPOINT;


    // Format helpers
    function fmtPrice(sym, v){
      if (!Number.isFinite(v)) return "--";
      if (sym === "BTC") return Math.round(v).toString();
      return v.toFixed(2);
    }

    function fmtPct(v){
      if (!Number.isFinite(v)) return "--";
      return (v >= 0 ? "+" : "") + v.toFixed(2) + "%";
    }

    // Build the tiles once
    function buildTiles(){
      const grid = document.getElementById("grid");
      grid.innerHTML = symbols.map(sym => `
        <div class="tile" data-symbol="${sym}">
          <div class="top">
            <div class="pct up" id="pct-${sym}">--</div>
            <div class="sym">$${sym}</div>
          </div>
          <div class="price" id="price-${sym}">--</div>
        </div>
      `).join("");
    }

    function setTile(sym, price, pct){
      const priceEl = document.getElementById(`price-${sym}`);
      const pctEl = document.getElementById(`pct-${sym}`);
      if (!priceEl || !pctEl) return;

      const up = Number.isFinite(pct) ? pct >= 0 : true;

      priceEl.textContent = fmtPrice(sym, price);
      pctEl.textContent = fmtPct(pct);

      pctEl.className = "pct " + (up ? "up" : "down");
    }

    const ENDPOINT = "https://pixel-ticker-api.ryan-j-cahoon.workers.dev/";

    async function update(){
      try{
        const res = await fetch(QUOTE_URL, { cache: "no-store" });
        const data = await res.json();

        for (const sym of symbols){
          const q = data[sym];
          if (!q) continue;
          setTile(sym, Number(q.price), Number(q.pct));
        }
      } catch(e){
        console.log("Update failed:", e);
      }
    }

    buildTiles();
    update();
    setInterval(update, 60000);
  </script>
</body>
</html>




